<section class="main-project">
	<h1 class="section-title">{{ project.name }} - Tasks</h1>
	<p>Want to see the users of this project ? <a href="#/projects/{{ project.id }}/users">Click here !</a></p>

	<div class="task-list">
		<h2 class="part-title">Task list :</h2>
		<p class="sync-buttons" ng-show="auth">
			<a href="" ng-click="sync()">Sync projects</a>
		</p>
		
		<ul class="view-mode" ng-hide="edit_mode">
			<li class="task-item" ng-repeat="task in project.tasks" ng-controller="TaskCtrl">
				<h3 class="task-title">{{ task.name }}</h3>
				<time class="task-dateCreation italic">{{ task.dateCreation }}</time>
				<p class="task-id italic"># {{ task.id }}</p>
				
				<p class="task-description">{{ task.description }}</p>
				
				<div class="task-dates">
					Begin : {{ task.dateBegin }} <br/>
					End : {{ task.dateEnd }}
				</div>
				
				<p>Status : {{ task.status }}</p>
				<p class="red" ng-show="{{ task.priority }}">This task is a priority !</p>
				<ul class="task-tag-list">
					<li ng-repeat="tag in task.tags">
						<a href="">{{ tag }}</a>
					</li>
				</ul>
				
				<a class="edit-link" href="" ng-click="toggleEditMode()">Edit task</a>
				<a class="delete-link" href="" ng-click="deleteTask()">Delete task</a>
			</li>
		</ul>
		
		<ul class="edit-mode" ng-show="edit_mode">
			<h3 class="task-title">Edit mode</h3>
			<li class="task-item" ng-repeat="task in project.tasks" ng-controller="TaskCtrl">
				<label for="taskName">Task name : ({{ task.name }})</label>
				<input name="taskName" ng-Model="taskEdit.name" type="text">
	
				<label for="taskDescription">Task description :</label>
				<textarea name="taskDescription" ng-Model="taskEdit.description" value="{{ task.description }}"></textarea>
	
				<label for="taskStatus">Task status :</label>
				<select name="taskStatus" ng-Model="taskEdit.status">
					<option>Pending ...</option>
					<option>25 %</option>
					<option>50 %</option>
					<option>75 %</option>
					<option>Finished</option>
				</select>
	
				<label for="taskPriority">Is this task a priority ?</label>
				<input name="taskPriority" ng-Model="taskEdit.priority" type="checkbox">
	
				<label for="taskDateBegin">Begin date :</label>
				<input name="taskDateBegin" ng-Model="taskEdit.dateBegin" type="text" value="{{ task.dateBegin }}">
	
				<label for="taskDateEnd">End date :</label>
				<input name="taskDateEnd" ng-Model="taskEdit.dateEnd" type="text" value="{{ task.dateEnd }}">
				
				<label for="taskTags">Tags (separate the differents tags with a coma (,) ):</label>
				<input name="taskTags" ng-Model="taskEdit.tags" type="text" value="{{ task.tags }}">
	
				<a class="edit-link" href="" ng-click="toggleEditMode()">Cancel edit</a>
				<a class="delete-link" href="" ng-click="deleteTask()">Delete task</a>
				
				<input type="submit" value="Update task" ng-click="editTask()">
			</li>
		</ul>
	</div>

	<div class="task-create">
		<h2 class="part-title">Add a task :</h2>

		<form ng-submit="createTask()">
			<label for="taskName">Task name :</label>
			<input name="taskName" ng-Model="task.name" type="text" placeholder="Task name">

			<label for="taskDescription">Task description :</label>
			<textarea name="taskDescription" ng-Model="task.description" placeholder="Task description"></textarea>

			<label for="taskStatus">Task status :</label>
			<select name="taskStatus" ng-Model="task.status">
				<option selected>Pending ...</option>
				<option>25 %</option>
				<option>50 %</option>
				<option>75 %</option>
				<option>Finished</option>
			</select>

			<label for="taskPriority">Is this task a priority ?</label>
			<input name="taskPriority" ng-Model="task.priority" type="checkbox">

			<label for="taskDateBegin">Begin date :</label>
			<input name="taskDateBegin" ng-Model="task.dateBegin" type="text">

			<label for="taskDateEnd">End date :</label>
			<input name="taskDateEnd" ng-Model="task.dateEnd" type="text">
			<!--<div class="calendar-container">
				<div class="calendar-header">
					<a class="calendar-arrow">< </a>
					<h3 class="calendar-month" >November</h3>
					<a class="calendar-arrow"> ></a>
				</div>
			</div>-->
			
			<label for="taskTags">Tags (separate the differents tags with a coma (,) ):</label>
			<input name="taskTags" ng-Model="task.tags" type="text">

			<input type="submit" value="Add the new task">
		</form>
	</div>
</section>