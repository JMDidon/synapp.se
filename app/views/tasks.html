<section class="main-project">
	<div class="task-list">
		<h2 class="part-title">Task list :</h2>
		<p class="sync-buttons" ng-show="auth">
			<a href="" ng-click="sync()">Sync projects</a>
		</p>
		
		<ul class="view-mode" ng-hide="edit_mode">
			<li class="task-item" ng-repeat="task in project.tasks" ng-controller="TaskCtrl">
				<h3 class="task-title">{{ task.name }}</h3>
				<time class="task-dateCreation italic">{{ task.dateCreation }}</time>
				<p class="task-id italic"># {{ task.id }}</p>
				
				<div class="task-dates">
					Begin : {{ task.start }} <br/>
					End : {{ task.end }}
				</div>
				
				<p>Status : {{ task.status }}</p>
				<p class="red" ng-show="{{ task.priority }}">This task is a priority !</p>
				<ul class="task-tag-list">
					<li ng-repeat="tag in task.tags">
						<a href="">{{ tag }}</a>
					</li>
				</ul>
				<ul>
					<li>Assigned to :</li>
					<li ng-repeat="user in task.users">{{ user }}</li>
				</ul>
				
				<a class="action-link" href="" ng-click="openComments(task, task.id)">Open a comments on this task</a>
				<a class="action-link" href="" ng-click="toggleEditMode()">Edit task</a>
				<a class="action-link" href="" ng-click="deleteTask()">Delete task</a>
			</li>
		</ul>
		
		<ul class="edit-mode" ng-show="edit_mode">
			<h3 class="task-title">Edit mode</h3>
			<li class="task-item" ng-repeat="task in project.tasks" ng-controller="TaskCtrl">
				<label for="taskName">Task name : ({{ task.name }})</label>
				<input name="taskName" ng-Model="taskEdit.name" type="text">
	
				<label for="taskStatus">Task status :</label>
				<select name="taskStatus" ng-Model="taskEdit.status">
					<option>Pending ...</option>
					<option>25 %</option>
					<option>50 %</option>
					<option>75 %</option>
					<option>Finished</option>
				</select>
	
				<label for="taskPriority">Is this task a priority ?</label>
				<input name="taskPriority" ng-Model="taskEdit.priority" type="checkbox">
	
				<label for="taskstart">Begin date :</label>
				<input name="taskstart" ng-Model="taskEdit.start" type="text" value="{{ task.start }}">
	
				<label for="taskend">End date :</label>
				<input name="taskend" ng-Model="taskEdit.end" type="text" value="{{ task.end }}">
				
				<label for="taskTags">Tags (separate the differents tags with a coma (,) ):</label>
				<input name="taskTags" ng-Model="taskEdit.tags" type="text" value="{{ task.tags }}">
	
				<a class="edit-link" href="" ng-click="toggleEditMode()">Cancel edit</a>
				<a class="delete-link" href="" ng-click="deleteTask()">Delete task</a>

				<label for="taskUsers">Who to assign this task to ?</label>
				<ul>
					<li ng-repeat="user in project.users"><input ng-Model="task.users" type="checkbox">{{ user.name }}</li>
				</ul>
				
				<input type="submit" value="Update task" ng-click="editTask()">
			</li>
		</ul>
	</div>

	<div class="task-create">
		<h2 class="part-title">Add a task :</h2>

		<form ng-submit="createTask(task)">
			<label for="taskName">Task name :</label>
			<input name="taskName" ng-Model="task.name" type="text" placeholder="Task name">

			<label for="taskStatus">Task status :</label>
			<select name="taskStatus" ng-Model="task.status">
				<option selected>Pending ...</option>
				<option>25 %</option>
				<option>50 %</option>
				<option>75 %</option>
				<option>Finished</option>
			</select>

			<label for="taskPriority">Is this task a priority ?</label>
			<input name="taskPriority" ng-Model="task.priority" type="checkbox">

			<label for="taskstart">Begin date :</label>
			<input name="taskstart" ng-Model="task.start" type="text">

			<label for="taskend">End date :</label>
			<input name="taskend" ng-Model="task.end" type="text">
			<!--<div class="calendar-container">
				<div class="calendar-header">
					<a class="calendar-arrow">< </a>
					<h3 class="calendar-month" >November</h3>
					<a class="calendar-arrow"> ></a>
				</div>
			</div>-->
			
			<label for="taskTags">Tags (separate the differents tags with a coma (,) ):</label>
			<input name="taskTags" ng-Model="task.tags" type="text">

			<label for="taskUsers">Who to assign this task to ?</label>
			<ul>
				<li ng-repeat="user in project.users"><input ng-Model="task.users" type="checkbox">{{ user.name }}</li>
			</ul>

			<input type="submit" value="Add the new task">
		</form>
	</div>
</section>